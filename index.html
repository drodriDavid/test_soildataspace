<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cat치logo de Datos | Soil Data Space</title>

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">

<style>

/* ===================== */
/* VARIABLES */
/* ===================== */
:root{
  --primary:#0a2540;
  --secondary:#5d9b3e;
  --accent:#008cba;
  --bg:#f5f7fa;
  --white:#fff;
  --border:#e4e7eb;

  --level1:#4caf50;
  --level2:#ff9800;
  --level3:#f44336;
  --level4:#9c27b0;
}

/* ===================== */
/* GLOBAL */
/* ===================== */
body{
  margin:0;
  font-family:'Roboto',sans-serif;
  background:var(--bg);
  color:#333;
}

h1{
  font-family:'Montserrat';
  margin:0;
}

.container{
  padding:40px;
}

/* ===================== */
/* HEADER */
/* ===================== */
.header{
  background:var(--primary);
  padding:25px 40px;
  color:white;
}

.header h1{
  font-size:1.8rem;
}

/* ===================== */
/* CONTROLS */
/* ===================== */
.controls{
  background:white;
  padding:25px 40px;
  display:flex;
  flex-wrap:wrap;
  gap:15px;
  border-bottom:1px solid var(--border);
}

.controls input,
.controls select{
  padding:10px 14px;
  border-radius:8px;
  border:1px solid var(--border);
  font-size:0.9rem;
}

.controls button{
  padding:10px 18px;
  background:var(--secondary);
  color:white;
  border:none;
  border-radius:8px;
  cursor:pointer;
  font-weight:600;
}

.controls button:hover{
  background:#4c8432;
}

/* ===================== */
/* TABLE */
/* ===================== */
.table-wrapper{
  padding:40px;
}

table{
  width:100%;
  border-collapse:collapse;
  background:white;
  border-radius:12px;
  overflow:hidden;
  box-shadow:0 10px 30px rgba(0,0,0,0.05);
}

thead{
  background:#f0f4f8;
}

th, td{
  padding:16px;
  text-align:left;
  font-size:0.9rem;
}

th{
  cursor:pointer;
  font-family:'Montserrat';
  font-size:0.8rem;
  text-transform:uppercase;
  letter-spacing:0.5px;
  color:#555;
}

tbody tr{
  border-top:1px solid var(--border);
  transition:0.2s;
}

tbody tr:hover{
  background:#f9fafb;
}

/* ===================== */
/* DATASET NAME */
/* ===================== */
.dataset-name{
  font-weight:600;
}

.dataset-desc{
  font-size:0.75rem;
  color:#777;
  margin-top:4px;
}

.federated-tag{
  font-size:0.65rem;
  background:#eee;
  padding:3px 6px;
  border-radius:4px;
  margin-left:8px;
}

/* ===================== */
/* BADGES */
/* ===================== */
.badge{
  padding:5px 10px;
  border-radius:20px;
  font-size:0.75rem;
  font-weight:600;
  color:white;
}

.agri{ background:#6abf4b;}
.hidro{ background:#0288d1;}
.clima{ background:#4db6ac;}
.geo{ background:#888;}

/* ===================== */
/* ACCESS LEVEL */
/* ===================== */
.level{
  padding:6px 12px;
  border-radius:20px;
  font-size:0.7rem;
  font-weight:700;
  color:white;
  display:inline-flex;
  align-items:center;
  gap:5px;
}

.l1{ background:var(--level1);}
.l2{ background:var(--level2);}
.l3{ background:var(--level3);}
.l4{ background:var(--level4);}

.request-btn{
  margin-top:6px;
  padding:6px 10px;
  font-size:0.7rem;
  border-radius:6px;
  border:none;
  background:var(--accent);
  color:white;
  cursor:pointer;
}

.request-btn:hover{
  background:#006c8e;
}

/* ===================== */
/* PAGINATION */
/* ===================== */
.pagination{
  display:flex;
  justify-content:center;
  gap:8px;
  margin-top:20px;
}

.pagination button{
  padding:8px 12px;
  border:none;
  background:#ddd;
  border-radius:6px;
  cursor:pointer;
}

.pagination button.active{
  background:var(--secondary);
  color:white;
}

@media(max-width:768px){
  .controls, .table-wrapper{
    padding:20px;
  }
}

</style>
</head>
<body>

<div class="header">
  <h1>Cat치logo de Datos</h1>
</div>

<div class="controls">
  <input type="text" id="search" placeholder="Buscar por palabra clave">
  
  <select id="filterTema">
    <option value="">Todos los temas</option>
    <option value="Agricultura">Agricultura</option>
    <option value="Agua">Agua</option>
    <option value="Clima">Clima</option>
    <option value="Geolog칤a">Geolog칤a</option>
  </select>

  <select id="filterLevel">
    <option value="">Todos los niveles</option>
    <option value="1">Nivel 1 - Abierto</option>
    <option value="2">Nivel 2 - Compartido</option>
    <option value="3">Nivel 3 - Restringido</option>
    <option value="4">Nivel 4 - Sensible</option>
  </select>

  <button onclick="resetFilters()">Limpiar</button>
</div>

<div class="table-wrapper">
<table id="datasetTable">
<thead>
<tr>
  <th onclick="sortTable('nombre')">Nombre</th>
  <th onclick="sortTable('tema')">Tema</th>
  <th onclick="sortTable('editor')">Editor</th>
  <th onclick="sortTable('nivel')">Nivel</th>
  <th onclick="sortTable('fecha')">Actualizaci칩n</th>
</tr>
</thead>
<tbody></tbody>
</table>

<div class="pagination" id="pagination"></div>

</div>

<script>

const datasets = [
  {
    nombre:"Balance de Nitr칩geno",
    descripcion:"C치lculo optimizado del balance suelo-cultivo tras cosecha.",
    tema:"Agricultura",
    editor:"UJA",
    fecha:"2026-02-10",
    nivel:1,
    federado:true
  },
  {
    nombre:"Modelo de erosi칩n h칤drica",
    descripcion:"Simulaci칩n del riesgo erosivo en cuencas mediterr치neas.",
    tema:"Agua",
    editor:"Junta",
    fecha:"2026-01-15",
    nivel:2,
    federado:false
  },
  {
    nombre:"Captura de carbono suelo",
    descripcion:"Estimaci칩n multiescala de carbono org치nico.",
    tema:"Clima",
    editor:"MAPA",
    fecha:"2026-02-01",
    nivel:3,
    federado:true
  },
  {
    nombre:"Mapa geol칩gico Andaluc칤a",
    descripcion:"Cartograf칤a estructural y litol칩gica regional.",
    tema:"Geolog칤a",
    editor:"UJA",
    fecha:"2025-12-20",
    nivel:4,
    federado:false
  }
];

let currentPage = 1;
const rowsPerPage = 5;
let filteredData = [...datasets];
let currentSort = null;

function renderTable(data){
  const tbody = document.querySelector("#datasetTable tbody");
  tbody.innerHTML = "";

  const start = (currentPage-1)*rowsPerPage;
  const paginated = data.slice(start, start+rowsPerPage);

  paginated.forEach(ds=>{
    const row = document.createElement("tr");

    row.innerHTML = `
      <td>
        <div class="dataset-name">
          ${ds.nombre}
          ${ds.federado ? '<span class="federated-tag">Federado</span>' : ''}
        </div>
        <div class="dataset-desc">${ds.descripcion}</div>
      </td>
      <td>${renderBadge(ds.tema)}</td>
      <td>${ds.editor}</td>
      <td>${renderLevel(ds.nivel)}</td>
      <td>${ds.fecha}</td>
    `;

    tbody.appendChild(row);
  });

  renderPagination(data.length);
}

function renderBadge(tema){
  const classes = {
    "Agricultura":"agri",
    "Agua":"hidro",
    "Clima":"clima",
    "Geolog칤a":"geo"
  };
  return `<span class="badge ${classes[tema]}">${tema}</span>`;
}

function renderLevel(nivel){
  const levels = {
    1:{text:"游깴 Abierto"},
    2:{text:"游뱋 Compartido"},
    3:{text:"游 Restringido"},
    4:{text:"游띠 Sensible"}
  };

  let button = "";
  if(nivel>1){
    button = `<button class="request-btn" onclick="alert('Flujo de contrato / usage control')">Solicitar acceso</button>`;
  }

  return `
    <div>
      <span class="level l${nivel}" title="Nivel ${nivel}">
        ${levels[nivel].text}
      </span>
      ${button}
    </div>
  `;
}

function applyFilters(){
  const search = document.getElementById("search").value.toLowerCase();
  const tema = document.getElementById("filterTema").value;
  const level = document.getElementById("filterLevel").value;

  filteredData = datasets.filter(ds=>{
    return (
      ds.nombre.toLowerCase().includes(search) &&
      (tema==="" || ds.tema===tema) &&
      (level==="" || ds.nivel==level)
    );
  });

  currentPage=1;
  renderTable(filteredData);
}

function resetFilters(){
  document.getElementById("search").value="";
  document.getElementById("filterTema").value="";
  document.getElementById("filterLevel").value="";
  applyFilters();
}

function sortTable(field){
  filteredData.sort((a,b)=>{
    return a[field]>b[field]?1:-1;
  });
  renderTable(filteredData);
}

function renderPagination(total){
  const container = document.getElementById("pagination");
  container.innerHTML="";
  const pages = Math.ceil(total/rowsPerPage);

  for(let i=1;i<=pages;i++){
    const btn = document.createElement("button");
    btn.textContent=i;
    if(i===currentPage) btn.classList.add("active");
    btn.onclick=()=>{
      currentPage=i;
      renderTable(filteredData);
    };
    container.appendChild(btn);
  }
}

document.getElementById("search").addEventListener("input",applyFilters);
document.getElementById("filterTema").addEventListener("change",applyFilters);
document.getElementById("filterLevel").addEventListener("change",applyFilters);

renderTable(datasets);

</script>

</body>
</html>